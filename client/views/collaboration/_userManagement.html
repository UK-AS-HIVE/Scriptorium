<template name="userAutocomplete">
  <div>
    <h4>{{name}}</h4>
    <h5>{{email}}</h5>
  </div>
</template>

<template name="_userManagement">
  <h2><i class="fa fa-comments"></i> Collaboration</h2>
  <p>Manage and communicate with your team.</p>

  <!-- TEAM MANAGEMENT -->
  <ul class="team">
    <h3>Manage Team</h3>
    {{#each project.permissions}}
      <li>
        <b>{{user.fullName}}</b>
        <small>{{level}}</small>
        {{#if isAdmin}}
          <span>
            <button class="btn btn-link edit" data-toggle="modal" data-modal="editUserModal" title="Edit"><i class="fa fa-pencil"></i></button>
            <button class="btn btn-link delete" data-toggle="modal" data-modal="removeUserModal" title="Delete"><i class="fa fa-times"></i></button>
          </span>
        {{/if}}
      </li>
    {{/each}}
  </ul>
  {{#if isAdmin}}
    <button href="#" data-toggle="modal" data-modal="addUserModal" class="btn btn-primary btn-block"><i class="fa fa-plus"></i> Add New Team Member</button>
  {{/if}}
</template>

<template name="addUserModal">
  <!-- ADD TEAM MEMBER MODAL -->
  <div class="modal fade" id="addUserModal">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label>Email Address</label>
              <input type="email" name="addUserEmail" class="form-control typeahead" autocomplete="off" spellcheck="off" placeholder="Name or Email Address"
              data-source="userSearch" data-template="userAutocomplete"/>
            </div>
            <div class="form-group">
              <label>Role</label>
              <select class="form-control" name="role">
                <option value="contributor">Contributor</option>
                <option value="admin">Admin</option>
              </select>
            </div>
          </form>
          <span class="error">{{modalError}}</span>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-action="addUser"><i class="fa fa-plus"></i> Add User</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="editUserModal">
  <!-- EDIT TEAM MEMBER MODAL -->
  <div class="modal fade" id="editUserModal">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body">
          <form>
            <div class="form-group">
              <h3>{{editingUser.fullName}}</h3>
              <h5>{{editingUser.primaryEmail}}</h5>
            </div>
            <div class="form-group">
              <label>Role</label>
              <select class="form-control role">
                <option value="contributor" selected="{{isRole 'contributor'}}">Contributor</option>
                <option value="admin" selected="{{isRole 'admin'}}">Admin</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-action="save"><i class="fa fa-floppy-o"></i> Save User</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="removeUserModal">
  <!-- REMOVE TEAM MEMBER MODAL -->
  <div class="modal fade" id="removeUserModal">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body">
          <p class="text-center">Are you sure you want to remove <b>{{editingUser.fullName}}</b> from the project?</p>
          <div class="row">
            <div class="col-xs-12">
              <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-danger pull-right" data-action="remove"><i class="fa fa-times"></i> Remove</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
